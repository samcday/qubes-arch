From 67b79a070541d94b9957b2a3ae41129a66c082c7 Mon Sep 17 00:00:00 2001
From: Sam Day <me@samcday.com>
Date: Sun, 27 Sep 2020 09:24:19 +0200
Subject: [PATCH] Use RuntimeDirectory in systemd unit files

---
 daemon/qubes-db-dom0.service | 1 +
 daemon/qubes-db.service      | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/daemon/qubes-db-dom0.service b/daemon/qubes-db-dom0.service
index 050313f..ed24232 100644
--- a/daemon/qubes-db-dom0.service
+++ b/daemon/qubes-db-dom0.service
@@ -3,6 +3,7 @@ Description=Qubes DB agent
 After=systemd-tmpfiles-setup.service
 
 [Service]
+RuntimeDirectory=qubes
 # Both agent and daemon for dom0
 ExecStart=/usr/sbin/qubesdb-daemon 0 dom0
 Type=notify
diff --git a/daemon/qubes-db.service b/daemon/qubes-db.service
index 4779923..b933172 100644
--- a/daemon/qubes-db.service
+++ b/daemon/qubes-db.service
@@ -4,7 +4,7 @@ After=systemd-modules-load.service fedora-loadmodules.service
 DefaultDependencies=no
 
 [Service]
-ExecStartPre=/bin/mkdir -p /var/run/qubes
+RuntimeDirectory=qubes
 # Remote Dom ID as an argument
 ExecStart=/usr/sbin/qubesdb-daemon 0
 Type=notify
-- 
2.28.0

